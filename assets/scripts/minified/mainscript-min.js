$(document).ready(function(){function a(){const a=`${m}weather?q=${o}&appid=${config.KEY}`;$.ajax({url:a,method:"GET"}).then(function(a){e(a,!0)}).fail(function(){alert(`Could not find city ${o}`)});const b=`${m}forecast?q=${o}&appid=${config.KEY}`;$.ajax({url:b,method:"GET"}).then(function(a){f(a),console.log(a),o=a.city.name,c()})}function b(b){b.preventDefault(),o=$("#city-search-input").val(),a()}function c(){for(j(),p.push(o);p.length>25;)p.splice(0,1);d(),k()}function d(){const a=$("#city-search-history");a.empty();for(let c,d=0;d<p.length;d++)c=$("<li class=\"dropdown-item\">"),c.text(p[d]),c.click(function(){$("#city-search-input").val(c.text()),b(event)}),a.prepend(c)}function e(a,b=!0){function c(){const a=["#2ecc71","#FFC300","#FF5733","#C70039","#900C3F"],b=$("#uv-indicator");2>e?b.css("background-color",a[0]):5>e&&2<=e?b.css("background-color",a[1]):7>e&&5<=e?b.css("background-color",a[2]):11>e&&7<=e?b.css("background-color",a[3]):11<=e&&b.css("background-color",a[4])}let d,e,f=Math.floor(2.237*a.wind.speed);d=b?`${h(a.main.temp)}째 F`:`${i(a.main.temp)}째 C`,$("#city-name").text(a.name),$("#country-code").text(a.sys.country),$("#temperature").text(d),$("#humidity").text(`${a.main.humidity}%`),$("#wind-speed").text(`${f} mph`),$("#weather-info-icon").attr("src",g(a.weather[0].icon,"large"));const j=`${m}uvi?appid=${config.KEY}&lat=${a.coord.lat}&lon=${a.coord.lon}`;$.ajax({url:j,method:"GET"}).then(function(a){e=a.value,$("#uv-index").text(e),c()})}function f(a,b=!0){function c(){k=h(k),l=h(l),e.eq(d).text(`${k}째 F`),f.eq(d).text(`${l}째 F`),i.eq(d).text(`${m}%`),j.eq(d).attr("src",g(n,"large"))}let d=0;const e=$(".forecast-high"),f=$(".forecast-low"),i=$(".forecast-humidity"),j=$(".forecast-icon");let k,l,m,n,o="";for(let e=0;e<a.list.length;e++)o==a.list[e].dt_txt.substring(0,10)?k<a.list[e].main.temp?(k=a.list[e].main.temp,m=a.list[e].main.humidity,n=a.list[e].weather[0].icon):l>a.list[e].main.temp&&(l=a.list[e].main.temp):(""!=o&&(c(),d++),o=a.list[e].dt_txt.substring(0,10),k=a.list[e].main.temp,l=a.list[e].main.temp,m=a.list[e].main.humidity,n=a.list[e].weather[0].icon);c()}function g(a,b="small"){const c=["small","mid","large"];let d="";return b==c[0]?d=`http://openweathermap.org/img/wn/${a}.png`:b==c[1]?d=`http://openweathermap.org/img/wn/${a}@2x.png`:b==c[2]?d=`http://openweathermap.org/img/wn/${a}@4x.png`:(console.error(`${b} size is not supported. Supported sizes include {'${c[0]}', '${c[1]}', '${c[2]}'}`),d=`http://openweathermap.org/img/wn/${a}.png`),d}function h(a){return Math.floor((a-273.15)*(9/5)+32)}function i(a){return Math.floor(a-273.15)}function j(){for(let a=0;a<p.length;a++)p[a]==o&&p.splice(a,1)}function k(){localStorage.setItem(n,JSON.stringify(p))}function l(){null!=localStorage.getItem(n)&&(p=JSON.parse(localStorage.getItem(n)),o=p[p.length-1])}const m="https://api.openweathermap.org/data/2.5/",n="city-history";let o="Austin",p=[];(function(){const a=moment(),b=$(".forecast-dow");$("#current-date").text(a.format("MM/DD/YYYY"));for(let c=0;5>c;c++)a.add(1,"days"),b.eq(c).text(a.format("dddd"))})(),l(),d(),a(),$("#city-search-btn").click(b)});